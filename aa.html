
<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8">
        <title>撸SIR</title>
        <link rel="shortcut icon" href="../images/mydefaultheader.png" />
        <link rel="apple-touch-icon-precomposed" href="../images/mydefaultheader.png">
        <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-touch-fullscreen" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="default" />
        <link href="http://www.u1u20.com/lusir/css/mui.min.css" rel="stylesheet" />
        <link href="http://www.u1u20.com/lusir/css/av_index.css" rel="stylesheet" />
        <meta name="referrer" content="never">
        <script src="http://www.u1u20.com/lusir/js/jquery-3.4.1.min.js"></script>
        <script src="http://www.u1u20.com/lusir/js/jquery.mobile-1.4.5.js"></script>
        <script src="https://cdn.bootcss.com/jsencrypt/3.0.0-beta.1/jsencrypt.js"></script>
        <script src="http://www.u1u20.com/lusir/js/mui.js"></script>
        <script type="text/javascript" charset="UTF-8">
            
            // if(window.navigator.standalone==undefined){
            //  window.location.href="home.html";
            // }else{
            //  if (window.navigator.standalone == false) {
            //      window.location.href="home.html";
            //  } else {
            //      // if (localStorage.getItem("memberid"+APP_NAME) == null || localStorage.getItem("memberid"+APP_NAME) == undefined) {
            //      //  window.location.href="home.html";
            //      // }
            //  }
            // }
                        
        </script>
        <style type="text/css">
            * {
                margin: 0;
                padding: 0;
            }

            .clearfix {
                *zoom: 1;
            }

            ul,
            li {
                list-style-type: none;
            }

            /* 去掉点击a标签背景色 */
            a {
                -webkit-tap-highlight-color: rgba(255, 255, 255, 0);
                -webkit-user-select: none;
                -moz-user-focus: none;
                -moz-user-select: none;
            }

            .head_nav_wrap {
                height: 40px;
                position: relative;
                z-index: 10;
                margin: 0 0px;
                overflow: hidden;
                background-color: #fff;
            }

            .head_nav {
                height: 50px;
                font-size: 16px;
                display: -webkit-box;
                display: -webkit-flex;
                display: -ms-flexbox;
                display: flex;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .head_nav>li {
                -webkit-box-flex: 0;
                -webkit-flex: none;
                -ms-flex: none;
                flex: none;
                padding-top: 4px;
                margin-right: 15px;
            }

            .head_nav a {
                display: block;
                position: relative;
                line-height: 38px;
                color: #222;
                text-decoration: none;
                font-family: "PingFangSC-Semibold, sans-serif";

            }

            .head_nav>li.active a {
                color: #E67BFF;
                font-family: "PingFangSC-Semibold, sans-serif";
            }

            .head_nav>li.active1 a {
                color: #E67BFF;
                font-family: "PingFangSC-Semibold, sans-serif";
                height: 30px;
                line-height: 30px;
                padding-left: 5px;
                padding-right: 5px;
                margin-top: 4px;
                border: 1px solid #E67BFF;
                border-radius: 4px;
            }
        </style>
    </head>

    <body style="margin: 0;background-color: #F8F8F8;hoverflow:scroll;height: auto;">
        <header class="mui-bar mui-bar-nav" style="margin: 0;background: #FFFFFF;">

            <div class="head_nav_wrap">
                <ul class="head_nav">
                    <li class="active1" id="all_0"><a>字母查询</a></li>
                    <li class="active" id="all_"><a onclick="changList('');">全部</a></li>
                    <li class="address_li" id="all_A"><a onclick="changList('A',this);">A</a></li>
                    <li class="address_li" id="all_B"><a onclick="changList('B',this);">B</a></li>
                    <li class="address_li" id="all_C"><a onclick="changList('C',this);">C</a></li>
                    <li class="address_li" id="all_D"><a onclick="changList('D',this);">D</a></li>
                    <li class="address_li" id="all_E"><a onclick="changList('E',this);">E</a></li>
                    <li class="address_li" id="all_F"><a onclick="changList('F',this);">F</a></li>
                    <li class="address_li" id="all_G"><a onclick="changList('G',this);">G</a></li>
                    <li class="address_li" id="all_H"><a onclick="changList('H',this);">H</a></li>
                    <li class="address_li" id="all_I"><a onclick="changList('I',this);">I</a></li>
                    <li class="address_li" id="all_J"><a onclick="changList('J',this);">J</a></li>
                    <li class="address_li" id="all_K"><a onclick="changList('K',this);">K</a></li>
                    <li class="address_li" id="all_L"><a onclick="changList('L',this);">L</a></li>
                    <li class="address_li" id="all_M"><a onclick="changList('M',this);">M</a></li>
                    <li class="address_li" id="all_N"><a onclick="changList('N',this);">N</a></li>
                    <li class="address_li" id="all_O"><a onclick="changList('O',this);">O</a></li>
                    <li class="address_li" id="all_P"><a onclick="changList('P',this);">P</a></li>
                    <li class="address_li" id="all_Q"><a onclick="changList('Q',this);">Q</a></li>
                    <li class="address_li" id="all_R"><a onclick="changList('R',this);">R</a></li>
                    <li class="address_li" id="all_S"><a onclick="changList('S',this);">S</a></li>
                    <li class="address_li" id="all_T"><a onclick="changList('T',this);">T</a></li>
                    <li class="address_li" id="all_U"><a onclick="changList('U',this);">U</a></li>
                    <li class="address_li" id="all_V"><a onclick="changList('V',this);">V</a></li>
                    <li class="address_li" id="all_W"><a onclick="changList('W',this);">W</a></li>
                    <li class="address_li" id="all_X"><a onclick="changList('X',this);">X</a></li>
                    <li class="address_li" id="all_Y"><a onclick="changList('Y',this);">Y</a></li>
                    <li class="address_li" id="all_Z"><a onclick="changList('Z',this);">Z</a></li>
                </ul>
            </div>
        </header>

        <div style="height: 51px;"></div>
        <div id="slider" class="mui-slider" style="display: none;">
            <div class="mui-slider-group mui-slider-loop">
                <!-- 额外增加的一个节点(循环轮播：第一个节点是最后一张轮播) -->
                <div class="mui-slider-item mui-slider-item-duplicate">
                    <a href="#">
                        <!-- <img src="../images/leaguetop_banner.jpg"> -->
                    </a>
                </div>
                <!-- 第一张 -->
                <div class="mui-slider-item">
                    <a href="#">
                        <!-- <img src="../images/leaguetop_banner.jpg"> -->
                    </a>
                </div>
                <!-- 第二张 -->
                <div class="mui-slider-item">
                    <a href="#">
                        <!-- <img src="../images/leaguetop_banner1.jpg"> -->
                    </a>
                </div>
                <!-- 第三张 -->
                <div class="mui-slider-item">
                    <a href="#">
                        <!-- <img src="../images/leaguetop_banner2.jpg"> -->
                    </a>
                </div>
                <!-- 第四张 -->
                <div class="mui-slider-item">
                    <a href="#">
                        <!-- <img src="../images/leaguetop_banner3.jpg"> -->
                    </a>
                </div>
                <!-- 额外增加的一个节点(循环轮播：最后一个节点是第一张轮播) -->
                <div class="mui-slider-item mui-slider-item-duplicate">
                    <a href="#">
                        <!-- <img src="../images/leaguetop_banner.jpg"> -->
                    </a>
                </div>
            </div>
            <div class="mui-slider-indicator">
                <div class="mui-indicator mui-active"></div>
                <div class="mui-indicator"></div>
                <div class="mui-indicator"></div>
                <div class="mui-indicator"></div>
            </div>
        </div>
        <div>
            <ul class=" imglist" id="imageList">

            </ul>
        </div>
        <div id="loading_v" style="text-align: center;height: 40px;line-height: 40px;">
            正在加载中……
        </div>
        <div style="height: 60px;"></div>
        <script type="text/javascript" charset="UTF-8">
            var actorCode = "";
            var pageNumber = 1;
            var pageSS = 40;
            var isload = false;
            var ids = new Array();
            var widthh = document.body.clientWidth;
            $("bodd").width(widthh);
            document.body.style.minHeight = document.body.clientHeight;

            function getVideoList() {
                // alert(222);
                var urlString = localStorage.getItem("ServerUrl"+APP_NAME) + '/services/AppActor/getActorList';
                // alert(urlString);
                $.ajax({
                    type: "GET",
                    url: urlString,
                    dataType: "text", //数据类型为jsonp  
                    data: {
                        "actorCode": actorCode,
                        "pageSize": pageSS,
                        "pageNumber": pageNumber,
                        "memberid": localStorage.getItem("memberid"+APP_NAME),

                        "appid": "123",
                        "tokens": "123"
                    },
                    jsonp: "jsonpCallback", //服务端用于接收callback调用的function名的参数

                    success: function(data) {
                        console.log(data);
                        // alert(data);
                        var obj = JSON.parse(getHttpDate(data, "getActorList"));
                        // var myinviteCode=obj.myinviteCode;
                        // var memberid=obj.id;
                        // var status = obj.count;
                        var oUl = document.getElementById('imageList');
                        if (pageNumber == 1) {
                            oUl.innerHTML = "";
                        }
                        // if (obj.list.length < pageSS) {
                        //  isload = false;
                        // } else {
                        //  isload = true;
                        // }
                        if (obj.list == undefined || obj.list.length == 0) {
                            isload = false;
                            document.getElementById("loading_v").innerHTML = "已加载全部数据";
                        } else {
                            if (obj.list.length < pageSS) {
                                isload = false;
                                document.getElementById("loading_v").innerHTML = "已加载全部数据";
                            } else {
                                isload = true;
                                document.getElementById("loading_v").innerHTML = "正在加载中……";

                            }

                        }

                        for (var i = 0; i < obj.list.length; i++) {
                            // alert(uncrypted2);
                            var name = "pp1";
                            var strrr = "收藏"
                            if (obj.list[i].iscoll != "0") {
                                strrr = "已收藏";
                                name = "pp2";
                            }
                            ids.push(obj.list[i].iscoll);



                            var intt = "<div class=\"big_div\">" +
                                "<img src=\"" + VIDEO_PATH + obj.list[i].actor_img + "\" class=\"image1\"  onclick=\"toClassifiction(\'" +
                                obj.list[i].id + "\',\'" + obj.list[i].actor_name + "\',\'" + obj.list[i].iscoll + "\',\'" + obj.list[i].actor_img +
                                "\');\"/>" +
                                "<p class=\"pp\">" + obj.list[i].actor_name + "</p>" +
                                "<p class=\"" + name + "\" id=\"imagee_" + i +
                                "\" onclick=\"to_coll(\'" + obj.list[i].id +
                                "\'," + i + ");\">" + strrr + "</p>" +
                                "</div>";

                            var li = document.createElement("li");
                            li.innerHTML = intt;
                            oUl.appendChild(li);
                        }


                    },
                    error: function() {
                        console.log('fail');
                        // alert('failAddMember');
                        // alert("获取用户信息失败");

                    }
                });
            }

            function to_coll(id, index) {
                var urlString = localStorage.getItem("ServerUrl"+APP_NAME) + '/services/AppMembers/addCollect';
                // alert(urlString);
                var type = 1;
                if (ids[index] != "0") {
                    type = 0;
                }
                $.ajax({
                    type: "GET",
                    url: urlString,
                    dataType: "text", //数据类型为jsonp  
                    data: {
                        "type": "actor",
                        "collectid": id,
                        "membersid": localStorage.getItem("memberid"+APP_NAME),
                        "status": type,
                        "appid": "123",
                        "tokens": "123"
                    },
                    jsonp: "jsonpCallback", //服务端用于接收callback调用的function名的参数

                    success: function(data) {
                        console.log(data);
                        // alert(data);
                        var obj = JSON.parse(getHttpDate(data, "addCollect"));
                        is_coll = false;
                        if (obj.status == 1) {
                            if (type == 0) {
                                // alert(1111);
                                ids[index] = "0";
                                // $('#imagee_' + index).attr("src", "../images/collection_0.png");
                                document.getElementById('imagee_' + index).innerHTML = "收藏";
                                document.getElementById('imagee_' + index).className = "pp1";

                            } else {
                                // alert(2222);
                                ids[index] = "1";
                                // $('#imagee_' + index).attr("src", "../images/collection_1.png");
                                document.getElementById('imagee_' + index).innerHTML = "已收藏";
                                document.getElementById('imagee_' + index).className = "pp2";


                            }

                            mui.toast('收藏操作成功')
                        }
                    },
                    error: function() {
                        console.log('fail');
                        // alert('failAddMember');
                        // alert("获取用户信息失败");
                        is_coll = false;
                    }
                });
            }

            function toClassifiction(id, actor_name, iscoll, actor_img) {
                localStorage.setItem("actor_name", actor_name);
                localStorage.setItem("actor_img", actor_img);

                top.location.href = "av_avactions.html?id=" + id + "&actor_name=" + actor_name + "&iscoll=" + iscoll +
                    "&actor_img=" + actor_img;

            }

            function changList(type, objeccc) {
                if (type == actorCode) {
                    return;
                }
                actorCode = type;
                pageNumber = 1;
                ids = new Array();
                initChangeCss(objeccc, type);
                getVideoList();
            }

            function initChangeCss(objeccc, type) {
                document.getElementById("all_").className = 'address_li';
                document.getElementById("all_A").className = 'address_li';
                document.getElementById("all_B").className = 'address_li';
                document.getElementById("all_C").className = 'address_li';
                document.getElementById("all_D").className = 'address_li';
                document.getElementById("all_E").className = 'address_li';
                document.getElementById("all_F").className = 'address_li';
                document.getElementById("all_G").className = 'address_li';
                document.getElementById("all_H").className = 'address_li';
                document.getElementById("all_I").className = 'address_li';
                document.getElementById("all_J").className = 'address_li';
                document.getElementById("all_K").className = 'address_li';
                document.getElementById("all_L").className = 'address_li';
                document.getElementById("all_M").className = 'address_li';
                document.getElementById("all_N").className = 'address_li';
                document.getElementById("all_O").className = 'address_li';
                document.getElementById("all_P").className = 'address_li';
                document.getElementById("all_Q").className = 'address_li';
                document.getElementById("all_R").className = 'address_li';
                document.getElementById("all_S").className = 'address_li';
                document.getElementById("all_U").className = 'address_li';
                document.getElementById("all_T").className = 'address_li';
                document.getElementById("all_V").className = 'address_li';
                document.getElementById("all_W").className = 'address_li';
                document.getElementById("all_X").className = 'address_li';
                document.getElementById("all_Y").className = 'address_li';
                document.getElementById("all_Z").className = 'address_li';
                document.getElementById("all_" + type).className = 'active';

            }



            // $("body").scroll(function() {
            //  // mui.toast('进来来来');
            //  var scrollTop = $(this).scrollTop(); //滚动条距离顶部的高度
            //  var scrollHeight = $(document).height(); //当前页面的总高度
            //  var clientHeight = $(this).height(); //当前可视的页面高度
            //  // mui.toast("top:"+scrollTop+",doc:"+scrollHeight+",client:"+clientHeight);

            //  if (scrollTop + clientHeight >= scrollHeight - 50) { //距离顶部+当前高度 >=文档总高度 即代表滑动到底部 
            //      //滚动条到达底部
            //      // mui.toast("进来了");
            //      if (isload == true) {
            //          pageNumber += 1;
            //          getVideoList();
            //      }
            //  } else if (scrollTop <= 0) {
            //      // mui.toast("进来了111");

            //      //滚动条到达顶部
            //      // alert(4);
            //      //滚动条距离顶部的高度小于等于0 TODO

            //  }
            // });

            window.onscroll = function() {
                //变量scrollTop是滚动条滚动时，距离顶部的距离
                var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
                //变量windowHeight是可视区的高度
                var windowHeight = document.documentElement.clientHeight || document.body.clientHeight;
                //变量scrollHeight是滚动条的总高度
                var scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight;
                //滚动条到底部的条件
                if (scrollTop + windowHeight > scrollHeight - 50) {
                    //写后台加载数据的函数
                    // console.log("距顶部" + scrollTop + "可视区高度" + windowHeight + "滚动条总高度" + scrollHeight);
                    if (isload == true) {
                        pageNumber += 1;
                        getVideoList();
                    }
                }
                // mui.toast(scrollTop+";;"+windowHeight+";;"+scrollHeight);
            }
        </script>
        <script defer="defer" type="text/javascript" charset="UTF-8">
            // alert(1111);
            getVideoList();
        </script>
    </body>

</html>
